#' R course day 2/ Live coding
#' 10.Feb.2018
today()
# New script file
3+3
4-2
2*3
4/2
6^10
6**2 # another way to take the power
log(12) # takes nat. log
a <- 3
print(a)
a = 3 # works but is not good style
a<- 3+2
a
b <- a+5
2 -> b
b
# Case sensitive
nrofdogs <- 5
nrOFdogs <- 6
rm(a)
nrOfChickens <- 4
nrOfDogs <- 5
nrOfAnimals <- nrOfDogs+nrOfChickens
nrOfAnimals
rm(nrOfDogs)
# Data Vectors
c(3, 4, 5.6, 7)
longvector<- c(3:65)
longvector
# your turn
length <- c(5,6, 8, 10)
c(length, 10, 7)
animal <- c("cat", "dog", "bear", "elephant")
length + 5
length +2
length + c(1,2,3,4)
c(1,2,3,4) + c(1,2,3)
c(1,2,3,4) +  c(1, 2)
# Named vectors
person <- c(name = "Masha", surname ="Mishka")
person
person["surname"]
person["name"]
# Data frames
mydata <- data.frame()
mydata
rm(animal)
rm(length)
mydata$animal
mydata$length
mydata
mydata$animal
mydata$width <- c(3, 3, 1, 1)
mydata
mydata$legthsquared <- mydata$length**2
mydata["length"]
mydata$length
mydata[c("animal", "width")]
# you turn
mydata$volume <- mydata$length*mydata$width
mydata
animalvolume <- mydata[c("animal", "volume")]
animalvolume
rm(mydata$volume) #  this will not work
mydata$volume <- NULL
mydata
# Commands and functions
mean(mydata$length)
?mean
mean(mydata$length,trim = 0.25)
missing <- c(4,5,6, NA)
mean(missing)
mean(missing,na.rm = TRUE)
?read.csv
read.csv("http://www.ut.ee/~iseppo/gdpestimate.csv")
gdp<- read.csv("http://www.ut.ee/~iseppo/gdpestimate.csv")
# Initial overview
summary(gdp)
str(gdp)
head(gdp, n = 2)
tail(gdp, n = 5)
View(head(gdp, n = 10))
# Your turn
gdp$difference <- gdp$firstEstimate - gdp$latestEstimate
summary(gdp)
mean(gdp$difference)
gdp$absdifference <- abs(gdp$difference)
gdp$absdifference
mean(gdp$absdifference)
sd(gdp$absdifference)
cor(gdp$firstEstimate, gdp$latestEstimate)
#
piaac <- read.csv("http://www.ut.ee/~iseppo/piaac.csv")
str(piaac)
dim(piaac) # Dimensions function
summary(piaac$income)
min(piaac$income, na.rm = T)
max(piaac$income, na.rm = T)
quantile(piaac$income, probs =  c(0.1, 0.5, 0.9),na.rm = TRUE)
# Saving data
write.csv(gdp, file= "gdpnew.csv")
save(gdp, file = "gdpnew.Rdat")
rm(gdp)
load(file = "gdpnew.Rdat")
dput(gdp, file = "gdp.txt")
# Data types
mypet <- "cat"
class(mypet)
mypet <- cat # this will give an error
c <- TRUE
class(c)
class(gdp$date)
a <- 4
a +5
whatisthis <-c(3, 4, "cat", 5)
str(whatisthis)
a<- 4
a +5
a <- as.character(a)
a
a + 5
as.numeric(a)
as.numeric(TRUE)
# Factors
factortest <- read.csv(file = "http://www.ut.ee/~iseppo/factortest.csv")
factortest
head(factortest)
View(factortest)
summary(factortest)
factortest$numbers <- as.numeric(factortest$length)
summary(factortest)
View(factortest)
factortest$correctnr <- as.numeric(as.character(factortest$length))
summary(factortest)
levels(factortest$animal)
factortest$animal <- as.factor(factortest$animal,
levels=c("dog", "elephant", "cat"))
factortest$animal <- factor(factortest$animal,
levels=c("dog", "elephant", "cat"))
levels(factortest$animal)
factortest$animal <- factor(factortest$animal,
levels=c("dog", "eleephant", "cat"))
levels(factortest$animal)
View(factortest)
factortest$animal <- factor(factortest$animal,
levels=c("dog", "elephant", "cat"))
factortest$animal <- factor(factortest$animal,
levels=c("dog", "elephant", "cat"), ordered = TRUE)
factortest$animal[1]
install.packages("tseries")
n
install.packages("packrat")
library("packrat", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
detach("package:packrat", unload=TRUE)
library(ggplot2)
library(dplyr)
# Dates
gdp <- read.csv("http://www.ut.ee/~iseppo/gdpestimate.csv")
head(gdp)
class(gdp$date)
gdp$date <- as.Date(gdp$date)
class(gdp$date)
summary(gdp)
library(lubridate)
dmy("22-1/2025")
ymd("1978-04-03") %--% today()/dhours(1)
(ymd("1978-04-03") %--% today())/dhours(1)
(ymd("1978-04-03") %--% today())/dmonths(1)
(ymd("1978-04-03") %--% today())/months(1)
(ymd("1978-04-03") %--% today())/seconds(1)
today()
mydata
#' R course day 2/ Live coding
#' 10.Feb.2018
mydata <- 5
rm(mydata)
myvector <- c(3,5, 4.3, 6)
myvector <- c(3,5, 4.3, 6)
mean(gdp$date)
names(gdp)
mean(piaac$EARNHR)
cor(piaac$PVNUM1, piaac$PVLIT1)
?cor
cor(complete.obs(piaac$PVNUM1, piaac$PVLIT1))
cor(complete.obs(piaac$PVNUM1, piaac$PVLIT1))
cor(piaac$PVNUM1, piaac$PVLIT1, use="complete.obs")
#
piaac <- read.csv("http://www.ut.ee/~iseppo/piaac.csv")
mean(piaac$EARNHR)
mean(piaac$EARNHR, na.rm = T)
median(piaac$EARNHR, na.rm=T)
piiac$logincome<- log(piaac$EARNHR)
#
piaac <- read.csv("http://www.ut.ee/~iseppo/piaac.csv")
mean(piaac$EARNHR, na.rm = T)
median(piaac$EARNHR, na.rm = T)
piaac$logincome<- log(piaac$EARNHR)
cor(piaac$PVNUM1, piaac$PVLIT1, use="complete.obs")
#
piaac <- read.csv("http://www.ut.ee/~iseppo/piaactest.csv")
#
piaac <- read.csv("http://www.ut.ee/~iseppo/piaacest.csv")
mean(piaac$EARNHR, na.rm = T)
median(piaac$EARNHR, na.rm = T)
mean(piaac$earnhr, na.rm = T)
median(piaac$earnhr, na.rm = T)
#
piaac <- read.csv("http://www.ut.ee/~iseppo/piaacest.csv")
mean(piaac$earnhr, na.rm = T)
median(piaac$earnhr, na.rm = T)
piaac$logincome<- log(piaac$earnhr)
cor(piaac$pvnum1, piaac$pvlit1, use="complete.obs")
# Getting data in
?read.csv
#
library(eurostat)
eurostatgdp<- get_eurostat("tec00114")
head(eurostatgdp)
View(head(eurostatgdp))
# for finance eg packages: "tidyquant" or "quandl"
?get_eurostat
# for finance eg packages: "tidyquant" or "quandl"
install.packages("wbstats")
library(wbstats)
View(head(eurostatgdp)) # this functions views the of eurostat
#' R course day 2/ Live coding
#' 10.Feb.2018
# Recap day 1
mydata <- 5
rm(mydata)
myvector <- c(3,5, 4.3, 6)
mean(gdp$date)
dataframe$newvariable <- NULL
?functionname
summary()
str()
head()
tail()
names(gdp)
#
piaac <- read.csv("http://www.ut.ee/~iseppo/piaacest.csv")
mean(piaac$earnhr, na.rm = T)
median(piaac$earnhr, na.rm = T)
piaac$logincome<- log(piaac$earnhr)
cor(piaac$pvnum1, piaac$pvlit1, use="complete.obs")
# Getting data in
?read.csv
read.csv(na.strings = c(NA, "", " ", ".")
read.csv(strip.white = FALSE)
read.csv(fileEncoding = )
#
# install.packages("eurostat")
library(eurostat)
eurostatgdp<- get_eurostat("tec00114")
View(head(eurostatgdp)) # this functions views the of eurostat
# for finance eg packages: "tidyquant" or "quandl"
# install.packages("wbstats")
library(wbstats)
#' this a commment
#' this is the second line of the comment
wbsearch("GDP per capita, PPP")
gdp.pc <- wb(indicator = "NY.GDP.PCAP.PP.KD", POSIXct = TRUE)
wbsearch("GDP per capita, PPP")
# install.packages("devtools")
devtools::install_github("vincentarelbundock/WDI")
# quick demo dataset
mydata <- data.frame(animal = c("elephant", "bear", "cat"),
length = c(5,3,2),
weight = c(10, 5, 1))
mydata
mydata$length[1]
mydata$weight[1] <- 12
mydata
mydata$length[c(2,3)]
mydata$length[-2]
mydata[1,2]
mydata[, 3]
mydata[c(2,3), ]
mydata$animal[c(TRUE, FALSE, TRUE)]
3>4
mydata$length > 2
mydata$animal[mydata$length > 2]
mydata[mydata$length > 2]
mydata$animal[mydata$length > 2]
mydata[mydata$length > 2]
mydata$length[mydata$animal == "elephant"] <- 100
# Basic comparison
x <- 3
z <- 4
x > 3
x >= 3
z < 4
z <= 4
x == z
x != z
is.na(x)
x > 2 | z > 5
x > 2 & z > 5
4 %in% c(2,3,4)
myanimals <- c("chicken", "duck", "bear")
"frog" %in% (myanimals)
mydata
is.na(mydata$weight)
!is.na(mydata$weight)
mydata$length > 2 & mydata$length < 5
# Filtering data
summary(piaac$edlevel3)
highschool <- subset(piaac,
edlevel3 == "Medium"& livingwithspouse == "Yes")
highschool
highschool2 <- subset(piaac,
edlevel3 == "Medium"& livingwithspouse == "Yes")
highschool <- subset(piaac, edlevel3 == "Medium")
summary(highschool)
summary(highschool$edlevel3)
highschool <- subset(piaac, edlevel3 = "Medium")
summary(highschool$edlevel3)
highschool <- subset(piaac, edlevel3 == "Medium")
summary(highschool$edlevel3)
?subset
mean(highschool2$pvnum1, na.rm = TRUE)
sample3 <- subset(piaac, edlevel3 %in% c("High", "Medium"))
edlevel <- c("High", "Medium")
sample4 <- subset(piaac, edlevel %in% edlevel)
sample4
sample4 <- subset(piaac, edlevel3 %in% edlevel)
sample4
summary(sample3)
str(sample3)
piaa<- subset(piaa, !is.na(edlevel3))
piaa<- subset(piaac, !is.na(edlevel3))
piaac<- subset(piaac, !is.na(edlevel3))
gdp <- read.csv("http://www.ut.ee/~iseppo/gdpestimate.gdb")
gdp <- read.csv("http://www.ut.ee/~iseppo/gdpestimate.gdp")
gdp <- read.csv("http://www.ut.ee/~iseppo/gdpestimate.csv")
gdp <- read.csv("http://www.ut.ee/~iseppo/gdpestimate.csv")
gdp <- read.csv("http://www.ut.ee/~iseppo/gdpestimate.csv")
gdp
gdp$difference <- gdp$firstEstimate - gdp$latestEstimate
gdp
years <- c("2012", "2013", "2014")
yearsIwant <- c("2012", "2013", "2014")
sample5 <- subset(gdp, year = yearsIwant)
str(sample5)
sample5 <- subset(gdp, year %in% yearsIwant)
str(sample5)
summary(gdp$year)
summary(sample5)
summary(sample5$year)
column(gdp)
names(gdp)
names(piaac)
sample6 <- subset(piaac,  livingwithspouse == "Yes")
sample6
sample6 <- subset(piaac,  livingwithspouse == "Yes")
sample6
str(sample6)
str(sample6)
sample6 <- subset(piaac,  livingwithspouse == "Yes")
str(sample6)
mean(sample6$earnhr)
mean(sample6$earnhr, na.rm =  T)
mean(sample5$difference)
names(piaac)
sample7 <- subset(piaac,  age > "34" & edlevel3 == "Medium")
sample7
str(sample7)
sample7$age
sample7 <- subset(piaac,  age > "34" & edlevel3 == "Medium")
str(sample7)
sample7$age
names(piaac)
sample7 <- subset(piaac,  age > 34 & edlevel3 == "Medium")
str(sample7)
sample7$age
sample7 <- subset(piaac,  age > "34" & edlevel3 == "Medium")
sample7$age
sample7$edlevel3
sample7 <- subset(piaac,  age > "34" & edlevel3 == "Medium")
str(sample7)
sample7$age
unique(sample7$age)
str(sample6)
mean(sample7$earnhr)
yearsIwant <- c("2012", "2013", "2014")
sample5 <- subset(gdp, year %in% yearsIwant)
str(sample5)
summary(sample5$year)
mean(sample5$difference)
names(piaac)
sample6 <- subset(piaac,  livingwithspouse == "Yes")
str(sample6)
mean(sample6$earnhr, na.rm =  TRUE)
sample7 <- subset(piaac,  age > "34" & edlevel3 == "Medium")
str(sample7)
sample7$age
sample7$edlevel3
mean(sample7$earnhr, na.rm = TRUE)
yearsIwant <- c("2012", "2013", "2014")
sample5 <- subset(gdp, year %in% yearsIwant)
str(sample5)
summary(sample5$year)
mean(sample5$difference)
mean(abs(sample6$earnhr, na.rm =  TRUE))
mean(sample6$earnhr, na.rm =  TRUE)
names(piaac)
sample6 <- subset(piaac,  livingwithspouse == "Yes")
str(sample6)
mean(sample6$earnhr, na.rm =  TRUE)
mean(subset(piaac, livingwithspouse == "Yes")$earnhr, na.rm=T)
mean(piaac$earnhr[piaac$livingwithspouse==TRUE], na.rm=T)
mean(piaac$earnhr[piaac$livingwithspouse=="Yes"], na.rm=T)
sample7 <- subset(piaac,  age > "34" & edlevel3 == "Medium")
mean(sample6$earnhr, na.rm =  TRUE)
sample7 <- subset(piaac,  age > "34" & edlevel3 == "Medium")
str(sample7)
sample7$age
sample7$edlevel3
mean(sample7$earnhr, na.rm = TRUE)
gdp.pc
unique(gdp.pc$country)
gdp.pc.world <- subset(gdp.pc, country == "World")
gdp.pc.world
library(ggplot2)
ggplot(data = gdp.pc.world) +
geom_point(aes(x = date_ct, y = value))
ggplot(data = gdp.pc.world) +
geom_point(aes(x = date_ct, y = value)) +
geom_line(aes(x=date_ct, y=value))
ggplot(data = gdp.pc.world, aes(x = date_ct, y = value)) +
geom_point() +
geom_line()
p.gdp <- ggplot(data = gdp.pc.world,
aes(x = date_ct, y = value)) +
geom_point() +
geom_line()
p.gdp <- ggplot(data = gdp.pc.world,
aes(x = date_ct, y = value)) +
geom_point() +
geom_line()
p.gdp
p.1 <- ggplot(data = gdp.pc.world,
aes(x = date_ct, y = value)) +
geom_point()
p.1 + geom_line()
ggsave(p.gdp, filename = "worldgdp.png",
height = 4, width = 4, scale = 2)
ggsave(p.gdp, filename = "worldgdp.png",
height = 4, width = 4, scale = 1)
ggsave(p.gdp, filename = "worldgdp.png",
height = 4, width = 4, scale = 2)
# Your turn
names(piaac)
ggplot(data = piaac, aes(x = pvnum1, y = logincome)) +
geom_point() +
geom_smooth()
library("ctv")
available.packages()
update.views("Econometrics")
update.views("TimeSeries")
install.packages("tufte")
install.packages("tint")
9+16
sqrt(25)
cos(0.1845)
cos(2)
tan(4/3)
cos(0.1845)
tan(0.1845)
?tan
x <- seq(-3, 7, by = 1/8)
tx <- cbind(x, cos(pi*x), cospi(x), sin(pi*x), sinpi(x),
tan(pi*x), tanpi(x), deparse.level=2)
op <- options(digits = 4, width = 90) # for nice formatting
head(tx)
tx[ (x %% 1) %in% c(0, 0.5) ,]
options(op)
cos(4/3)
cos(1)
cos(1)+2
3^2
3^2 -2^2 + 4^2
sqrt(21)
3^2 + 4^2
length(nicolas)
length("nicolas")
name <- "nicolas"
length(name)
nchar("nicolas")
nchar("reigl")
